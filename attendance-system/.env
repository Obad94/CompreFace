# ═══════════════════════════════════════════════════
# CompreFace + Dify Relay Server Configuration
# PRODUCTION ENVIRONMENT VARIABLES
# ═══════════════════════════════════════════════════

# Dify Configuration
# Get your API key from: Dify Dashboard → App Settings → API Keys
DIFY_API_KEY=app-HZeKv0QeNYSmpOFrpfIqokYD
DIFY_API_URL=http://localhost/v1

# For self-hosted Dify, use your own URL:
# DIFY_API_URL=https://your-dify-instance.com/v1

# CompreFace Configuration
# CRITICAL: Keep this key SECRET! Never expose in browser!
COMPREFACE_URL=http://localhost:8000
COMPREFACE_API_KEY=6b818a80-3193-4873-ad58-06d38c9a4010

# Server Configuration
PORT=8787
# NODE_ENV=production
NODE_ENV=development

# Optional: Database (for persistent storage)
# DATABASE_URL=postgresql://user:password@localhost:5432/attendance

# Optional: Redis (for caching and session management)
# REDIS_URL=redis://localhost:6379

# CORS Configuration (update for production)
ALLOWED_ORIGINS=http://localhost:8888,http://localhost:8000,http://localhost:3000,https://your-domain.com,http://localhost:80

# Security
# Generate strong secret: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-jwt-secret-key-here
SESSION_SECRET=your-session-secret-here

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000  # 1 minute
RATE_LIMIT_MAX_REQUESTS=100  # 100 requests per window

# Logging
LOG_LEVEL=info  # error, warn, info, debug
LOG_FILE=./logs/attendance.log

# Optional: Email Notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=noreply@yourschool.com

# Optional: SMS Notifications  
SMS_API_KEY=your-sms-api-key
SMS_SENDER_ID=SchoolName

# Feature Flags
ENABLE_STREAMING=false  # Set to true for SSE streaming responses
ENABLE_PERSISTENCE=false  # Set to true to use database
ENABLE_NOTIFICATIONS=false  # Set to true for auto notifications

# Monitoring
ENABLE_METRICS=true  # Expose /metrics endpoint
ENABLE_HEALTH_CHECK=true  # Expose /health endpoint

# ═══════════════════════════════════════════════════
# IMPORTANT SECURITY NOTES:
# 
# 1. NEVER commit this file with real keys to git
# 2. Add .env to .gitignore
# 3. Use different keys for dev/staging/production
# 4. Rotate keys regularly
# 5. Use environment-specific config management
#    (AWS Secrets Manager, Azure Key Vault, etc.)
# ═══════════════════════════════════════════════════
